<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Leos 18</title>
<meta name="description" content="Leos 18th birthday â€” countdown, schedule, map, and Spotify Jam link." />
<style>
  :root{--bg:#fff;--ink:#141416;--muted:#5b5f6b;--card:#ffffff;--line:#e9e9ee;--btn:#141416;--btn-ink:#fff}
  [data-theme="dark"]{--bg:#0e0f13;--ink:#eef1f6;--muted:#9aa1b3;--card:#13141a;--line:#252832;--btn:#eef1f6;--btn-ink:#0e0f13}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;background:var(--bg);color:var(--ink)}
  a{color:inherit}
  .wrap{max-width:820px;margin:0 auto;padding:24px 16px 48px}
  header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid var(--line);position:sticky;top:0;background:var(--bg);z-index:10}
  .title{font-weight:800;letter-spacing:.3px}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid var(--line);background:var(--btn);color:var(--btn-ink);padding:.7rem 1rem;border-radius:10px;font-weight:700;cursor:pointer}
  .btn.ghost{background:transparent;color:inherit}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin-top:18px}
  h1{font-size:clamp(1.9rem,4.5vw,2.4rem);margin:.2rem 0 .2rem}
  h2{font-size:1.2rem;margin:.2rem 0 .6rem}
  .lead{color:var(--muted);margin:.2rem 0 .6rem}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:720px){.grid{grid-template-columns:1fr}}
  .count{display:flex;gap:8px}
  .box{border:1px solid var(--line);border-radius:10px;padding:.6rem .8rem;text-align:center;min-width:76px}
  .box b{display:block;font-size:1.6rem}
  label{font-weight:700;color:var(--muted);font-size:.95rem}
  input,button{font:inherit}
  input[type="text"],input[type="datetime-local"],input[type="url"]{width:100%;padding:.7rem .8rem;border-radius:10px;border:1px solid var(--line);background:transparent;color:inherit}
  .list{display:grid;gap:8px}
  .item{display:grid;grid-template-columns:96px auto;gap:12px;padding:10px;border:1px solid var(--line);border-radius:10px}
  .muted{color:var(--muted)}
  .map{width:100%;height:300px;border:0;border-radius:12px}
  .note{font-size:.92rem;color:var(--muted)}
  .spacer{height:8px}
</style>
</head>
<body data-theme="light">
<header>
  <div class="title">Leos 18</div>
  <div class="row">
    <button id="theme" class="btn ghost" aria-label="Toggle theme">Light</button>
    <a href="#jam" class="btn ghost">Jam</a>
  </div>
</header>

<main class="wrap">
  <!-- Hero / Countdown -->
  <section class="card">
    <h1>Party starts soon ðŸŽ‰</h1>
    <p class="lead">16 Aug, 20:00 â€” Selsbakkvegen 5c. See you there.</p>
    <div class="count" aria-live="polite">
      <div class="box"><b id="d">--</b><span>Days</span></div>
      <div class="box"><b id="h">--</b><span>Hours</span></div>
      <div class="box"><b id="m">--</b><span>Minutes</span></div>
      <div class="box"><b id="s">--</b><span>Seconds</span></div>
    </div>
    <div class="spacer"></div>
    <div class="row">
      <a class="btn" href="#schedule">View schedule</a>
      <a class="btn ghost" href="#map">Open map</a>
    </div>
    <div class="spacer"></div>
    <label for="dt">Need to adjust the time?</label>
    <div class="row">
      <input id="dt" type="datetime-local" />
      <button id="saveDt" class="btn">Save</button>
      <button id="resetDt" class="btn ghost">Reset</button>
    </div>
    <p id="saved" class="note" style="display:none">Saved.</p>
  </section>

  <!-- Schedule -->
  <section id="schedule" class="card">
    <h2>Schedule</h2>
    <div class="list" id="sched">
      <!-- injected -->
    </div>
  </section>

  <!-- Map -->
  <section id="map" class="card">
    <h2>Where</h2>
    <p class="lead">Selsbakkvegen 5c</p>
    <div class="row">
      <a id="mapsBtn" class="btn" target="_blank" rel="noopener">Open in Maps</a>
      <button id="copyAddr" class="btn ghost">Copy address</button>
    </div>
    <div class="spacer"></div>
    <iframe id="mapFrame" class="map" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
  </section>

  <!-- Jam link -->
  <section id="jam" class="card">
    <h2>Join the Jam</h2>
    <p class="lead">Paste your Spotify Jam link once. The big button below will take everyone straight there.</p>
    <div class="row">
      <input id="jamUrl" type="url" placeholder="https://open.spotify.com/jam/..." />
      <button id="jamSave" class="btn">Save Jam</button>
      <button id="jamClear" class="btn ghost">Clear</button>
    </div>
    <div class="spacer"></div>
    <a id="jamGo" class="btn" target="_blank" rel="noopener" style="display:inline-block">ðŸŽµ Join the Jam</a>
    <p id="jamNote" class="note"></p>
  </section>
</main>

<script>
  // ===== helpers
  const $ = s => document.querySelector(s);
  const store = {
    get(k, d){ try{const v = localStorage.getItem(k); return v ? JSON.parse(v) : d}catch{ return d } },
    set(k, v){ localStorage.setItem(k, JSON.stringify(v)) },
    del(k){ localStorage.removeItem(k) }
  };

  // ===== theme
  const themeBtn = $('#theme');
  const THEME_KEY = 'theme';
  function applyTheme(mode){
    document.body.dataset.theme = mode;
    themeBtn.textContent = mode === 'dark' ? 'Dark' : 'Light';
  }
  applyTheme(store.get(THEME_KEY, 'light'));
  themeBtn.addEventListener('click', () => {
    const next = document.body.dataset.theme === 'light' ? 'dark' : 'light';
    applyTheme(next);
    store.set(THEME_KEY, next);
  });

  // ===== schedule
  const schedule = [
    { time: '20:00', label: 'Guests arrive' },
    { time: '21:00', label: 'Food is served' },
    { time: '00:00', label: 'Cake & champagne' },
  ];
  $('#sched').innerHTML = schedule.map(i => `
    <div class="item">
      <div><strong>${i.time}</strong></div>
      <div>${i.label}</div>
    </div>
  `).join('');

  // ===== map
  const address = 'Selsbakkvegen 5c';
  const q = encodeURIComponent(address);
  $('#mapsBtn').href = `https://www.google.com/maps?q=${q}`;
  $('#mapFrame').src = `https://www.google.com/maps?q=${q}&output=embed`;
  $('#copyAddr').addEventListener('click', async () => {
    try { await navigator.clipboard.writeText(address); alert('Address copied'); }
    catch { prompt('Copy address:', address); }
  });

  // ===== countdown
  const dEl = $('#d'), hEl = $('#h'), mEl = $('#m'), sEl = $('#s');
  const DT_KEY = 'party_dt';
  // default: 16 Aug 2025 20:00 local
  function defaultLocalISO(){
    const t = new Date(2025, 7, 16, 20, 0, 0); // months are 0-based
    const off = t.getTimezoneOffset();
    return new Date(t - off*60000).toISOString().slice(0,16);
  }
  let targetISO = store.get(DT_KEY, defaultLocalISO());
  $('#dt').value = targetISO;

  function tick(){
    const t = new Date($('#dt').value || targetISO);
    const now = new Date();
    let diff = t - now;
    if (isNaN(diff)) { dEl.textContent=hEl.textContent=mEl.textContent=sEl.textContent='--'; return; }
    if (diff <= 0) { dEl.textContent=hEl.textContent=mEl.textContent=sEl.textContent='00'; return; }
    const d = Math.floor(diff/86400000); diff -= d*86400000;
    const h = Math.floor(diff/3600000);  diff -= h*3600000;
    const m = Math.floor(diff/60000);    diff -= m*60000;
    const s = Math.floor(diff/1000);
    dEl.textContent = String(d).padStart(2,'0');
    hEl.textContent = String(h).padStart(2,'0');
    mEl.textContent = String(m).padStart(2,'0');
    sEl.textContent = String(s).padStart(2,'0');
  }
  setInterval(tick, 1000); tick();

  // save/reset date-time
  $('#saveDt').addEventListener('click', () => {
    const v = $('#dt').value;
    if (!v) return;
    store.set(DT_KEY, v);
    targetISO = v;
    $('#saved').style.display = 'block';
    setTimeout(() => $('#saved').style.display = 'none', 900);
  });
  $('#resetDt').addEventListener('click', () => {
    const v = defaultLocalISO();
    $('#dt').value = v;
    store.set(DT_KEY, v);
    targetISO = v;
  });

  // ===== Jam link
  const JAM_KEY = 'jam_link';
  const jamSaved = store.get(JAM_KEY, '');
  const jamGo = $('#jamGo'), jamNote = $('#jamNote'), jamUrl = $('#jamUrl');

  function renderJam(url){
    if (url) {
      jamGo.href = url;
      jamGo.style.pointerEvents = 'auto';
      jamGo.classList.remove('ghost');
      jamNote.textContent = 'Jam is set.';
    } else {
      jamGo.href = '#';
      jamGo.style.pointerEvents = 'none';
      jamGo.classList.add('ghost');
      jamNote.textContent = 'No Jam set yet.';
    }
  }
  jamUrl.value = jamSaved;
  renderJam(jamSaved);

  $('#jamSave').addEventListener('click', () => {
    const url = jamUrl.value.trim();
    if (!/^https?:\/\/open\.spotify\.com\/jam\//.test(url)) {
      alert('Please paste a valid Spotify Jam link (starts with https://open.spotify.com/jam/...)');
      return;
    }
    store.set(JAM_KEY, url);
    renderJam(url);
  });
  $('#jamClear').addEventListener('click', () => {
    store.del(JAM_KEY);
    jamUrl.value = '';
    renderJam('');
  });
</script>
</body>
</html>
